<?php /* */defined('BASEPATH') OR exit('No direct script access allowed');?><div class="content-wrapper">    <section class="content-header">        <?php /* */ echo $pagetitle; ?>        <?php /* */ echo $breadcrumb; ?>    </section>    <section class="content">        <div class="row">            <div class="col-md-12">                <?php /* */ if ($error) echo '<div class="alert alert-danger">' . $error . '</div>'; ?>                <div class="box">                    <div class="box-body">                        <?php /* */ if ($user_data->user_type == 'a') : ?>                            <div class="row">                                <div class="col-md-4 col-md-offset-4">                                    <h4><?= lang('common_report_filter'); ?></h4>                                    <form method="get" id="report-filter-form">                                        <div class="row">                                            <div class="col-xs-12">                                                <div class="input-group">                                                    <select name="filters[company_id]" class="form-control">                                                        <?= $companies_option ?>                                                    </select>                                                    <span class="input-group-btn"><button class="btn btn-info"><i                                                                class="glyphicon glyphicon-arrow-right"></i>                                                        </button></span>                                                </div>                                            </div>                                        </div>                                    </form>                                    <script>                                        company_id = 0;                                        function set_params(params) {                                            params.company_id = company_id;                                            return params;                                        }                                        ;                                        function refresh_table() {                                            data_url = "<?=base_url()?><?=$table_data_ajax_path; ?>";                                            $('#report-table').bootstrapTable('refresh', {                                                query: {company_id: company_id},                                                url: data_url                                            });                                        }                                        ;                                        $(document).ready(function () {                                            /*if form will submit*/                                            $('#report-filter-form').on('submit', function (e) {                                                e.preventDefault();                                                refresh_table();                                            });                                            $('[name="filters[company_id]"]').on('change', function (e) {                                                company_id = $('[name="filters[company_id]"]').val();                                                refresh_table();                                            });                                            company_id = $('[name="filters[company_id]"]').val();                                            /* Load on page ready */                                            refresh_table();                                        });                                    </script>                                </div>                            </div>                        <?php /* */ endif; ?>                        <div class="row">                            <div class="col-md-12">                                <!-- Content table -->                                <table id="report-table" class="table table-bordered table-responsive bs-tbl"                                       data-toggle="table"                                    <?php /* */ if ($user_data->user_type != 'a'): ?>                                        data-url="<?= base_url() . $table_data_ajax_path; ?>"                                    <?php /* */ else: ?>                                        data-query-params="set_params"                                    <?php /* */ endif; ?>                                       data-pagination="true"                                       data-side-pagination="server"                                       data-data-field="data"                                       data-show-columns="true"                                       data-show-export="true"                                       data-sort-order="desc">                                    <thead>                                    <th data-field="outlet_id"><?= lang('outlet_code'); ?></th>                                    <th data-field="name"><?= lang('common_name'); ?></th>                                    <th data-field="company"><?= lang('company'); ?></th>                                    <th data-field="created_at"><?= lang('common_created_at'); ?></th>                                    <th data-field="actions_col" data-formatter="add_actions"                                        data-events="add_actions_events"></th>                                    </thead>                                </table>                                <script>                                    function add_actions(value, row, index) {                                        return [                                            '<a class="btn btn-warning btn-xs edit" href="javascript:void(0)" title="Edit">',                                            '<i class="glyphicon glyphicon-pencil"></i>',                                            '</a>  '/*,                                             '<a class="btn btn-danger btn-xs delete" href="javascript:void(0)" title="Delete">',                                             '<i class="glyphicon glyphicon-remove"></i>',                                             '</a>'*/                                        ].join('');                                    }                                    window.add_actions_events = {                                        'click .edit': function (e, value, row, index) {                                            /*//alert('You click like action, row: ' + JSON.stringify(row));*/                                            post('<?=base_url().$edit_url;?>', row, 'post');                                        },                                        'click .delete': function (e, value, row, index) {                                            $('#report-table').bootstrapTable('remove', {                                                field: 'id',                                                values: [row.id]                                            });                                        }                                    };                                </script>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </section></div>